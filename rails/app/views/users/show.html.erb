<!-- app/views/users/show.html.erb -->
<div class="px-3 sm:px-4 py-4 sm:py-8 pb-24 sm:pb-0">
  <style>
    @media (max-width: 640px) {
      .mobile-full-width {
        width: 100vw !important;
        margin-left: calc(50% - 50vw) !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        box-sizing: border-box;
      }
      .no-overflow-x * {
        max-width: 100% !important;
        box-sizing: border-box !important;
      }
      .tabs.tabs-lifted .tab {
        white-space: nowrap;
        font-size: 0.875rem;
        padding-left: 0.75rem;
        padding-right: 0.75rem;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        min-height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: auto;
      }
    }
    
    /* Pour √©cran medium (tablette) */
    @media (min-width: 641px) and (max-width: 1023px) {
      .tabs.tabs-lifted .tab {
        white-space: nowrap;
        font-size: 0.875rem;
        padding-left: 0.75rem;
        padding-right: 0.75rem;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        min-height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: auto;
      }
    }
  </style>
  <div class="w-full sm:max-w-4xl mx-auto px-3 sm:px-4 mobile-full-width no-overflow-x">
    
    <!-- Header avec bouton th√®me -->
    <div class="flex justify-between items-center mb-6 sm:mb-8">
      <h1 class="text-2xl sm:text-3xl font-bold">üë§ Mon Profil</h1>
      
      <button id="theme-button-profile" onclick="toggleTheme()" class="btn btn-sm btn-accent" title="Changer le th√®me">
        Mode üåô
      </button>
    </div>
    
    <!-- Tabs DaisyUI -->
    <div role="tablist" class="tabs tabs-lifted tabs-sm sm:tabs-md">
      
      <!-- Tab 1 : Mes pr√©f√©rences -->
      <input type="radio" name="profile_tabs" role="tab" class="tab" aria-label="‚öôÔ∏è Mes pr√©f√©rences" checked />
      <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-4 sm:p-6 w-full box-border mb-2">
        <%= render 'profile_preferences_form' %>
      </div>
      
      <!-- Tab 2 : Mes informations -->
      <input type="radio" name="profile_tabs" role="tab" class="tab" aria-label="üìù Mes informations" />
      <div role="tabpanel" class="tab-content bg-base-100 border-base-300 rounded-box p-4 sm:p-6 w-full box-border mb-2">
        <%= render 'profile_info_form' %>
      </div>
      
    </div>
    
  </div>
</div>
<script>
  // Mettre √† jour le bouton de th√®me
  (function() {
    function updateProfileThemeButton() {
      const button = document.getElementById('theme-button-profile');
      const currentTheme = document.documentElement.getAttribute('data-theme');
      
      if (button) {
        if (currentTheme === 'dark') {
          button.textContent = 'Mode ‚òÄÔ∏è';
        } else {
          button.textContent = 'Mode üåô';
        }
      }
    }
    
    updateProfileThemeButton();
    document.addEventListener('turbo:load', updateProfileThemeButton);
    
    const observer = new MutationObserver(updateProfileThemeButton);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['data-theme']
    });
  })();
</script>
